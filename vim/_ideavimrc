let mapleader=' '

" ============= OS specific settings =============

" open or source ideavimrc
nnoremap <F11> :vsp ~\_ideavimrc<CR><C-W>l
nnoremap <F12> :source ~\_ideavimrc<CR>


" ============= PLUGINS =============

set surround
set multiple-cursors

" emulates easymotion/vim-easymotion
nnoremap ö :action KJumpAction<CR>

" emulates wellle/targets.vim
" no di/da mappings, they clash with surround
nnoremap ci) %ci)
nnoremap ca) %ca)
nnoremap ci( %ci(
nnoremap ca( %ca(
nnoremap ci] %ci]
nnoremap ca] %ca]
nnoremap ci[ %ci[
nnoremap ca[ %ca[
nnoremap ci} %ci}
nnoremap ca} %ca}
nnoremap ci{ %ci{
nnoremap ca{ %ca{

" emulates vim-scripts/ReplaceWithRegister
nnoremap äiw "_diwP
nnoremap äaw "_dawP
nnoremap äiW "_dIwP
nnoremap äaW "_dAwP
nnoremap äis "_disP
nnoremap äas "_dasP
nnoremap äip "_dipP
nnoremap äap "_dapP
nnoremap äib "_dibP
nnoremap äab "_dabP
nnoremap äiB "_diBP
nnoremap äaB "_daBP
nnoremap äi( "_di(P
nnoremap äi) "_di)P
nnoremap äa( "_da(P
nnoremap äa) "_da)P
nnoremap äi[ "_di[P
nnoremap äi] "_di]P
nnoremap äa[ "_da[P
nnoremap äa] "_da]P
nnoremap äi{ "_di{P
nnoremap äi} "_di}P
nnoremap äa{ "_da{P
nnoremap äa} "_da}P
nnoremap äi< "_di<P
nnoremap äi> "_di>P
nnoremap äa< "_da<P
nnoremap äa> "_da>P
nnoremap äi" "_di"P
nnoremap äa" "_da"P
nnoremap äi' "_di'P
nnoremap äa' "_da'P
nnoremap äi` "_di`P
nnoremap äa` "_da`P
nnoremap äit "_ditP
nnoremap äat "_datP
nnoremap Ä "_Dp
nnoremap ää "_ddP
vnoremap ä "_dP


" ============= GENERAL =============

" line numbers
set number relativenumber

" search settings
set incsearch hlsearch ignorecase smartcase gdefault

set timeoutlen=600     " timeout for keymappings
set clipboard=unnamed  " use system clipboard
set scrolloff=1        " pad scrolling with one line
set showmode           " show current mode in statusbar
set visualbell         " removes errorbells


" ============= MAPPINGS =============

" move between splits
nnoremap <A-L> <C-W>l
nnoremap <A-H> <C-W>h

" makes these easier to use
noremap , :
nnoremap : ;
nnoremap ; ,

" make Y behave the same way as D and C
nnoremap Y y$

" makes v and V more consistent with other commands
nnoremap vv V
nnoremap V <C-V>$

" makes S more useful
nnoremap S ciw

" change enter behaviour
nnoremap <CR> o<Esc>
nnoremap <S-Enter> O<Esc>
nnoremap <C-Enter> mqo<Esc>`q
nnoremap <C-S-Enter> mqO<Esc>`q
nnoremap <Leader><CR> mqa<CR><Esc>`q
inoremap <C-Enter> <C-O>:action EditorCompleteStatement<CR>

" better way to indent
nnoremap <BS> <<
nnoremap <TAB> >>
vnoremap <BS> <gv
vnoremap <TAB> >gv

" Q plays back q macro
nnoremap Q @q

" clear highlights
nnoremap <Esc> <Esc>:noh<CR>

" makes using marks a lot better
nnoremap ' :action ShowBookmarks<CR>
nnoremap m :action ToggleBookmarkWithMnemonic<CR>

" comment out lines and paragraphs etc
nnoremap gcc :action CommentByLineComment<CR>
nnoremap gcip vip:action CommentByLineComment<CR>
vnoremap gc :action CommentByLineComment<CR>

nnoremap <Leader>a :action GotoAction<CR>
nnoremap <Leader>b :action ToggleLineBreakpoint<CR>
nnoremap <Leader>c :action FileStructurePopup<CR>
nnoremap <Leader>d :action QuickJavaDoc<CR>
nnoremap <Leader>e :action ChooseRunConfiguration<CR>
nnoremap <Leader>f :action GotoFile<CR>
nnoremap <Leader>g :action Generate<CR>
nnoremap <Leader>h :action HighlightUsagesInFile<CR>
nnoremap <Leader>i :action QuickImplementations<CR>
nnoremap <Leader>j :action ShowNavBar<CR>
nnoremap <Leader>k :action ViewBreakpoints<CR>
nnoremap <Leader>l :action FindInPath<CR>
nnoremap <Leader>m :action RecentChangedFiles<CR>
nnoremap <Leader>n :action NewFile<CR>
nnoremap <Leader>o :action ShowReformatFileDialog<CR>
vnoremap <Leader>o :action VimReformatVisual<CR>
nnoremap <Leader>p :action PasteMultiple<CR>
noremap <Leader>q :action Unwrap<CR>
nnoremap <Leader>r :action RenameElement<CR>
nnoremap <Leader>s :action GotoSymbol<CR>
noremap <Leader>t :action ExpressionTypeInfo<CR>
nnoremap <Leader>u :action ShowUsages<CR>
nnoremap <Leader>v :action Debug<CR>
noremap <Leader>w :action SurroundWith<CR>
noremap <Leader>x :action Refactorings.QuickListPopupAction<CR>
nnoremap <Leader>y :action ShowErrorDescription<CR>
nnoremap <Leader>z :action RenameFile<CR>
nnoremap <Leader>[ :action LocalHistory.ShowHistory<CR>

nnoremap <Leader><Esc> :action MarkNotificationsAsRead<CR>

nnoremap <C-H> :action ParameterInfo<CR>
nnoremap <C-J> :action EditorCloneCaretBelow<CR>
nnoremap <C-K> :action EditorCloneCaretAbove<CR>
inoremap <C-H> <C-O>:action ParameterInfo<CR>
inoremap <C-J> <C-O>:action EditorCloneCaretBelow<CR>
inoremap <C-K> <C-O>:action EditorCloneCaretAbove<CR>

nnoremap <C-P> :action GotoPreviousError<CR>
nnoremap <C-N> :action GotoNextError<CR>

nnoremap <C-T> :action Back<CR>
nnoremap <C-O> :action Back<CR>
nnoremap <C-I> :action Forward<CR>
